# mkr-check-self

- あるいは mackarel-agent のさぶせっとを作る方法
- by id:karupanerura
- mkr-chefk-self とは
  - mackarel-agent の設定をみて
  - check 項目を取得し
  - 監視を実行する
  - 以上
- 使用例
  - plugins.checks.cert-file-karuaps
    - 証明書有効期限監視
  - plugins.checks.http-h2o
    - H2O サーバの死活監視
  - plugins.checks.h2o-access-logs
    - アクセスログ監視
- なぜほしくなったのか
  - GCPのIaaSであるGoogleComputeEngine
    - Stackdriverでの監視が基本
    - いろいろあって mackarel も使いたくなった
  - 大人の事情で勝手に登録してためしにくい
    - しかし検証はしたい
- mackarel-agent
  - OSSになっている
  - configなどは別パッケージになっている
  - config読み取り部分だけをライブラリとして使うことができる、やったー
- ただし
  - OSSになっているとはいえ mackarel-agent の中のパッケージ
  - ライブラリとして使えるがライブラリとして使うために公開されているわけではない
  - 使う場合は自己責任でね
